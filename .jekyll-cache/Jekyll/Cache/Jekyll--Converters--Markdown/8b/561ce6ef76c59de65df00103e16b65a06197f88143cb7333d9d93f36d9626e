I"Õ<p>2021/1/5</p>
<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>è¯¾ç¨‹è®¾è®¡GUIéœ€è¦ï¼Œè¡¥å……åœ¨<a href="http://lhdaren.cn/2021/01/15/%E7%94%A8PyInstaller%E6%89%93%E5%8C%85.py%E6%96%87%E4%BB%B6/">ä¹‹å‰æ–‡ç« </a>çš„ç®€æ˜“å›¾ç‰‡è¯»å–è½¯ä»¶ä¸Š</p>
<h2 id="å®ç°">å®ç°</h2>
<p>é¦–å…ˆè¦å®šä¹‰ä¸€ä¸ªå¸¸è§„æŒ‰é’®</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="bp">self</span><span class="p">.</span><span class="n">bt2</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">'æµè§ˆ'</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
<span class="bp">self</span><span class="p">.</span><span class="n">bt2</span><span class="p">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">70</span> <span class="p">,</span><span class="mi">30</span><span class="p">)</span> 
<span class="bp">self</span><span class="p">.</span><span class="n">bt2</span><span class="p">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s">'&lt;b&gt;ç‚¹å‡»è¿™é‡Œæµè§ˆæ–‡ä»¶&lt;/b&gt;'</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>å°†æŒ‰é’®é“¾æ¥åˆ°æ–‡ä»¶æµè§ˆåŠŸèƒ½ä¸­</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="bp">self</span><span class="p">.</span><span class="n">bt2</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">setBrowerPath</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>æ–‡ä»¶æµè§ˆæ¨¡å—</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">setBrowerPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
    
    <span class="n">file_path</span><span class="p">,</span> <span class="n">file_type</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="p">.</span><span class="n">getOpenFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">'æ‰“å¼€æ–‡ä»¶'</span><span class="p">,</span><span class="s">'./'</span><span class="p">,(</span><span class="s">"Images (*.png *.xpm *.jpg)"</span><span class="p">))</span>
    <span class="bp">self</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="bp">self</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">selectAll</span><span class="p">()</span>
    <span class="bp">self</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">setFocus</span><span class="p">()</span>
    <span class="c1"># ä¸Šé¢"Images (*.png *.xpm *.jpg)"çš„æ„ä¹‰æ˜¯åªèƒ½é€‰æ‹©åç¼€åœ¨æŒ‡å®šèŒƒå›´å†…çš„æ–‡ä»¶
</span>    <span class="c1"># å¦‚æœè¦é€‰æ‹©æ–‡ä»¶ç›®å½•è€Œä¸æ˜¯å…·ä½“æ–‡ä»¶ï¼Œä½¿ç”¨ï¼š
</span>    <span class="c1"># directory_path = QFileDialog.getExistingDirectory(self, 'æ‰“å¼€æ–‡ä»¶å¤¹','./')
</span></pre></td></tr></tbody></table></code></pre></div></div>
<h2 id="æ•ˆæœ">æ•ˆæœ</h2>
<p><img src="https://i.loli.net/2021/01/05/U3wVNYuSqr45aKI.gif" alt="" /></p>
<h2 id="é™„å½•">é™„å½•</h2>

<ul>
  <li>å®Œæ•´ä»£ç 
```python
import sys
import cv2
import numpy
from PyQt5.QtWidgets import QFileDialog, QApplication, QWidget, QPushButton, QMessageBox, QLineEdit
from PyQt5.QtGui import QIcon
from random import randint</li>
</ul>

<p>class Example(QWidget):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
</pre></td><td class="rouge-code"><pre>def __init__(self):

    super().__init__()
    self.initUI()
    # self.filename = 'a.jpg'

def initUI(self):

    self.setGeometry(300, 300, 300, 150)
    self.setWindowTitle('è¯»å–å›¾ç‰‡')
    self.setWindowIcon(QIcon('res/faye.jpg'))

    self.bt1 = QPushButton('è¯»å–', self)
    self.bt1.setGeometry(150, 90, 70 ,30)
    self.bt1.setToolTip('&lt;b&gt;ç‚¹å‡»è¿™é‡Œè¯»å–å›¾ç‰‡&lt;/b&gt;')
    self.bt1.clicked.connect(self.showMessage)

    self.bt2 = QPushButton('æµè§ˆ', self)
    self.bt2.setGeometry(80, 90, 70 ,30)
    self.bt2.setToolTip('&lt;b&gt;ç‚¹å‡»è¿™é‡Œæµè§ˆæ–‡ä»¶&lt;/b&gt;')
    self.bt2.clicked.connect(self.setBrowerPath)

    self.text = QLineEdit('åœ¨è¿™é‡Œè¾“å…¥æ–‡ä»¶è·¯å¾„ï¼ˆä¸è¦å«æœ‰ä¸­æ–‡ï¼‰', self)
    self.text.selectAll()
    self.text.setFocus()
    self.text.setGeometry(25, 50, 250 ,30)

    self.show()

def showMessage(self):

    filename = self.text.text()
    # print(filename)
    img = cv2.imread(filename)
    img1 = cv2.imread('a.jpg')
    
    if type(img) == type(img1):
        QMessageBox.about(self, 'å°é—®é¢˜...','è·¯å¾„å¥½åƒé”™äº†')
        self.text.selectAll()
        self.text.setFocus()
    else:
        cv2.imshow(filename, img)
        cv2.waitKey(0)
        self.text.clear()
        self.text.setText('åœ¨è¿™é‡Œè¾“å…¥æ–‡ä»¶è·¯å¾„ï¼ˆä¸è¦å«æœ‰ä¸­æ–‡ï¼‰')
        self.text.selectAll()
        self.text.setFocus()

def setBrowerPath(self): 
    
    file_path, file_type = QFileDialog.getOpenFileName(self, 'æ‰“å¼€æ–‡ä»¶','./',("Images (*.png *.xpm *.jpg)"))   
    self.text.setText(file_path)
    self.text.selectAll()
    self.text.setFocus()

def closeEvent(self, event):

    reply = QMessageBox.question(self, 'ç¡®è®¤', 'ç¡®è®¤é€€å‡ºå—', QMessageBox.Yes | QMessageBox.No, QMessageBox.No)
    if reply == QMessageBox.Yes:
        event.accept()        
    else:
        event.ignore()  
</pre></td></tr></tbody></table></code></pre></div></div>

<p>if <strong>name</strong> == â€˜<strong>main</strong>â€™:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>app = QApplication(sys.argv)
ex = Example()
sys.exit(app.exec_())
</pre></td></tr></tbody></table></code></pre></div></div>

<p>```</p>
:ET